# ADR 001: オニオンアーキテクチャの採用

*   **Status**: Accepted (実装済み)
*   **Date**: YYYY-MM-DD (推定)
*   **Deciders**: (不明)

## Context and Problem Statement

アプリケーションの関心事（ビジネスロジック、アプリケーションロジック、インフラストラクチャ）を分離し、依存関係を管理する必要がある。特に、ビジネスロジックの中核であるドメイン層を、他の技術的詳細から保護し、変更に強く、テストしやすい構造にしたい。

## Decision Drivers

*   関心の分離 (Separation of Concerns)
*   テスト容易性 (Testability)
*   保守性 (Maintainability)
*   ビジネスロジックの独立性確保

## Considered Options

*   **オニオンアーキテクチャ**: ドメイン中心。依存関係は常に内側へ。
*   (推測) レイヤードアーキテクチャ: 一般的だが、ドメイン層がUIやインフラに依存するリスク。
*   (推測) ヘキサゴナルアーキテクチャ（ポートとアダプター）: オニオンと類似。外部との接続点をより重視。
*   (推測) 無秩序な構造

## Decision Outcome

**オニオンアーキテクチャを採用する。**

理由:
*   ドメイン層が中心に位置し、他のどの層にも依存しないため、ビジネスロジックの純粋性を保ちやすい。
*   依存性の方向が明確（外側から内側へ）であり、依存性の逆転（インターフェースへの依存）と組み合わせることで、各層の疎結合が促進される。
*   ドメイン層とアプリケーション層はインフラストラクチャの詳細から独立するため、テストが容易になる。

## Consequences

### Positive:
*   ドメインロジックのテストが容易になった。
*   インフラストラクチャ層（例: DB実装）の変更が、ドメイン層やアプリケーション層に影響を与えにくくなった。
*   コードベースの見通しが良くなった。

### Negative:
*   (推測) レイヤー間のマッピング（DTOなど）が若干増える可能性がある。
*   (推測) シンプルなアプリケーションには過剰な構造になる可能性。

## References

*   [The Onion Architecture : part 1](https://jeffreypalermo.com/2008/07/the-onion-architecture-part-1/)
*   `docs/architecture/overview.md`
