# ADR 0006: フロントエンド技術として React (Next.js) + TypeScript を採用

*   **Status**: Accepted
*   **Date**: 2025-04-20
*   **Deciders**: (議論参加者)

## Context and Problem Statement

Webアプリケーション (ADR 0004) を SPA + API アーキテクチャ (ADR 0005) で構築することを決定した。次に、フロントエンドSPAを実装するための具体的な技術スタック（UIライブラリ/フレームワーク、言語）を選定する必要がある。

## Decision Drivers

*   **開発効率と生産性**: モダンな開発体験、豊富な機能、設定の容易さ。
*   **エコシステムとコミュニティ**: ライブラリ、ツール、情報、人材の入手しやすさ。
*   **型安全性**: 静的型付けによるコードの堅牢性向上。
*   **サンプルとしての価値**: 一般的でモダンな技術スタックを採用したい。
*   **保守性と拡張性**: 長期的なメンテナンスや機能追加のしやすさ。

## Considered Options

1.  **React (Next.js) + TypeScript**: Reactライブラリと、それをベースにしたフルスタックフレームワークNext.jsをTypeScriptで使用する。
    *   Pros: 巨大なエコシステム、豊富な機能（ルーティング、最適化等）、優れた開発体験、事実上の標準フレームワーク、TypeScriptによる型安全性。
    *   Cons: フレームワークの学習コスト（特にApp Routerなど）、規約への追従。
2.  **React (Vite) + TypeScript**: ReactライブラリをViteビルドツールと共に使用。フレームワークは使わない。
    *   Pros: 構成の自由度が高い、最小構成から始められる。
    *   Cons: ルーティング、ビルド最適化などを自前で設定する必要があり手間がかかる。
3.  **Vue.js (Nuxt.js) + TypeScript**: Vue.jsとそのフレームワークNuxt.jsをTypeScriptで使用する。
    *   Pros: 学習曲線が緩やか、優れた公式ドキュメント、統合されたエコシステム。
    *   Cons: React/Next.jsほどの巨大なエコシステムではない。
4.  **Angular + TypeScript**: Google製のフルスタックフレームワーク。
    *   Pros: オールインワン、一貫した開発体験、大規模向け。
    *   Cons: 学習コストが高い、フレームワークの独自性が強い。
5.  **Svelte (SvelteKit) + TypeScript**: コンパイルベースの軽量フレームワーク。
    *   Pros: 高速、シンプルな記述。
    *   Cons: エコシステムや実績が他の主要フレームワークに比べて小さい。
6.  **Rust + WASM フレームワーク (Yew, Leptos, Dioxus)**: フロントエンドもRustで記述。
    *   Pros: 言語統一、Rustの特性活用。
    *   Cons: エコシステムが未成熟、学習コストが高い、WASM特有の課題。

## Decision Outcome

**選択肢1「React (Next.js) + TypeScript」を採用する。**

理由:
*   **ReactとTypeScriptの組み合わせ**: 広く普及しており、豊富なライブラリ、コミュニティサポート、型安全性といったメリットを享受できる。開発者の経験も比較的活かしやすい。
*   **Next.jsフレームワークの採用**: SPAとして利用する場合でも、ファイルシステムベースのルーティング、最適化されたビルド、優れた開発サーバーなど、Next.jsが提供する多くの恩恵を受けられる。これにより、Vite等で自前で環境構築する手間が省け、開発効率が向上する。
*   **サンプルとしての適切性**: React + Next.js + TypeScript は、現代的なWebフロントエンド開発のデファクトスタンダードの一つであり、サンプルプロジェクトとして示す価値が高い。
*   **将来性**: Next.jsは活発に開発されており、Reactの最新機能（Server Components等）への追従も早い。

**アーキテクチャ上の位置づけと構成方針:**
*   採用するReact (Next.js) SPAは、バックエンド（Rust/オニオンアーキテクチャ）が提供するAPIを利用する**独立したクライアントアプリケーション**として位置づける。
*   フロントエンドアプリケーション内部においても、厳密なオニオンアーキテクチャではないものの、**関心の分離**（例: UIコンポーネント層、状態管理層、APIクライアント層）や**レイヤリング**といったアーキテクチャ原則を適用し、保守性・テスト容易性の高い構成を目指す。

## Consequences

### Positive:
*   生産性の高い開発体験が得られる。
*   豊富なライブラリやコンポーネントを活用できる。
*   型安全性により、コードの品質と保守性が向上する。
*   最新のWebフロントエンド開発プラクティスに沿った構成となる。

### Negative:
*   Next.jsフレームワークの学習コスト（特にApp Routerなど新しい概念）が発生する。
*   フレームワークの規約に従う必要がある。
*   (懸念は低いが) 不要な機能が含まれる可能性。

## References

*   ADR 0004: サービス提供形態としてWebアプリケーションを採用
*   ADR 0005: システム構成としてSPA + APIアーキテクチャを採用 