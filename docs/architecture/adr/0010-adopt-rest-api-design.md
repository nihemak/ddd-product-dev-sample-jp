# ADR 0010: API設計方針として REST を採用

*   **Status**: Accepted
*   **Date**: 2025-04-20
*   **Deciders**: (議論参加者)

## Context and Problem Statement

バックエンドAPI (Rust) とフロントエンドSPA (React/Next.js) 間で通信するためのAPI設計スタイルを決定する必要がある (ADR 0005)。主な選択肢として、REST (Representational State Transfer) と GraphQL が考えられる。

## Decision Drivers

*   **シンプルさと理解容易性**: 広く普及しており、多くの開発者が理解しやすい設計スタイルであること。
*   **成熟度とエコシステム**: 技術的に成熟しており、ツール、ライブラリ、ドキュメントが豊富であること。
*   **開発者の経験**: 既存の知識や経験を活かせること。
*   **標準技術の活用**: HTTPプロトコルやWeb標準技術（キャッシュなど）を自然に活用できること。
*   **サンプルとしての適切性**: 一般的なWebアプリケーションの構成要素として理解しやすいこと。

## Considered Options

1.  **REST**: HTTPメソッドとURLを用いてリソースを操作する、ステートレスなアーキテクチャスタイル。
    *   Pros: シンプルで理解しやすい、成熟した技術と巨大なエコシステム、Web標準との親和性が高い、多くのフレームワークで標準的にサポート。
    *   Cons: オーバーフェッチ/アンダーフェッチの可能性、エンドポイントが増加しやすい傾向。
2.  **GraphQL**: APIのためのクエリ言語と、そのクエリを実行するためのランタイム。
    *   Pros: クライアントが必要なデータを正確に取得できる、単一エンドポイント、強力な型システム。
    *   Cons: 学習コストが高い（クライアント/サーバー双方）、サーバー実装の複雑性が増す可能性、キャッシュ戦略が異なる、RustエコシステムがRESTほど成熟していない可能性。

## Decision Outcome

**API設計方針として REST を採用する。**

理由:
*   **シンプルさと普及度**: RESTはWeb APIの事実上の標準であり、多くの開発者にとって理解しやすく、学習コストが低い。
*   **成熟したエコシステム**: RustのWebフレームワーク（Actix Web, Axumなど）はREST APIの構築を強力にサポートしており、周辺ツールも豊富。
*   **開発者の経験**: 開発者のRESTに関する経験を活かすことができる。
*   **サンプルとしての適切性**: 他の新しい技術要素（DDD, Rust, Render/Vercel）が多い中で、API設計は安定した選択とすることで、プロジェクト全体の複雑性を抑える。
*   **オーバー/アンダーフェッチの懸念**: OpenAPIによる明確なスキーマ定義と、適切なAPI設計により、ある程度緩和可能と判断。

## Consequences

### Positive:
*   広く理解されている概念に基づき、開発を進めやすい。
*   豊富なツールやライブラリ、ドキュメントを活用できる。
*   HTTPキャッシュなどのWeb標準技術を容易に活用できる。
*   バックエンドフレームワークの標準的な機能を利用しやすい。

### Negative:
*   クライアントが必要とするデータ構造によっては、複数回のAPIリクエストが必要になる可能性がある (アンダーフェッチ)。
*   特定のリソース取得で不要なデータが含まれる可能性がある (オーバーフェッチ)。
*   機能追加に伴い、APIエンドポイントが増加する可能性がある。

## References

*   ADR 0005: システム構成としてSPA + APIアーキテクチャを採用 