# ADR 0012: UIコンポーネント仕様管理に Storybook を採用

*   **Status**: Accepted
*   **Date**: 2025-04-20
*   **Deciders**: (議論参加者)

## Context and Problem Statement

フロントエンドSPA (React/Next.js) の画面仕様（UIコンポーネントの見た目、挙動、バリエーションなど）を定義・管理し、開発者間で共有する必要がある。外部のデザインツール (Figma等) への依存を避け、GitHubリポジトリ内で完結させたい。仕様と実装の乖離を防ぎたい。

## Decision Drivers

*   **情報の一元管理**: 仕様情報をGitHubリポジトリ内で管理したい。
*   **実装との同期**: 仕様と実際のUIコンポーネント実装との乖離を最小限に抑えたい。
*   **インタラクティブ性**: 静的なドキュメントだけでなく、実際にコンポーネントを操作して確認できるようにしたい。
*   **開発効率**: コンポーネント駆動開発 (Component-Driven Development) を促進したい。
*   **再利用性**: UIコンポーネントのカタログとして機能させ、再利用を促進したい。

## Considered Options

1.  **UIコンポーネントライブラリ + Storybook + Markdown**: Storybookで個々のUIコンポーネントをカタログ化・ドキュメント化し、画面全体の構成やフローはMarkdownで補足する。
    *   Pros: 実装との同期が容易、インタラクティブな確認が可能、コンポーネント再利用促進、GitHubリポジトリ内でコードとして管理可能 (Storybookのストーリー)。
    *   Cons: Storybookのセットアップと学習コスト、画面全体のデザイン俯瞰には不向きな場合がある。
2.  **Markdown + 画像/図**: Markdownで仕様を記述し、ワイヤーフレームやモックの画像を埋め込む。
    *   Pros: シンプル、GitHub完結。
    *   Cons: 静的、デザイン詳細伝達困難、画像メンテナンスコスト。
3.  **HTML/CSS プロトタイプ**: 静的なHTML/CSSでプロトタイプを作成する。
    *   Pros: ブラウザ確認可能、GitHub完結。
    *   Cons: 実装との二重管理リスク、メンテナンスコスト。

## Decision Outcome

**選択肢1「UIコンポーネントライブラリ + Storybook + Markdown」を採用する。**

理由:
*   **実装との連携**: Storybookは実際のUIコンポーネントコードに基づいてドキュメントを生成するため、仕様と実装の乖離が最も起きにくい。
*   **開発者体験**: コンポーネントを独立して開発・テスト・確認できる環境を提供し、コンポーネント駆動開発を促進する。
*   **インタラクティブな仕様**: 開発者や関係者が実際にコンポーネントを操作して挙動を確認できるため、認識齟齬を防ぎやすい。
*   **GitHub完結**: Storybookのストーリーファイルや設定はコードとしてリポジトリで管理でき、ビルド結果もGitHub Pages等で公開可能。
*   **補完性**: Storybookが苦手とする画面全体の構成やフローについては、Markdownドキュメントで補完することで対応可能。

## Consequences

### Positive:
*   UIコンポーネントの仕様が明確になり、再利用性が向上する。
*   仕様と実装の乖離が起こりにくくなる。
*   コンポーネント単位での開発・テストが促進される。
*   インタラクティブなドキュメントにより、コミュニケーションが円滑になる。

### Negative:
*   Storybookの導入・設定・運用に関する学習コストと手間が発生する。
*   先に利用するUIコンポーネントライブラリを選定する必要がある。
*   ビルド時間や依存関係がわずかに増加する。
*   画面全体のデザインを俯瞰するには、Markdown等での補足ドキュメントが重要になる。

## References

*   [Storybook: UI component explorer for frontend developers](https://storybook.js.org/)
*   ADR 0006: フロントエンド技術として React (TypeScript) + Next.js を採用 