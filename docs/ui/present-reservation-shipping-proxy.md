# 画面仕様: プレゼント予約作成（発送代行）

## 1. 関連する要求

*   **User Story Mapping:**
    *   [プレゼント予約を行う（発送代行）](<../requirements/user_story_mapping.md#バックボーン-プレゼント予約を行う発送代行>)
        *   [届け先を選択して予約作成](<../requirements/user_story_mapping.md#-プレゼントを送りたい人として登録した届け先を選択してプレゼント予約を作成したい>)
        *   [記念日を指定](<../requirements/user_story_mapping.md#-プレゼントを送りたい人として送りたい記念日日付を指定したい>)
        *   [メッセージを入力](<../requirements/user_story_mapping.md#-プレゼントを送りたい人としてプレゼントに添えるメッセージカードの内容を入力したい>)
        *   [発送代行プレゼント情報を入力](<../requirements/user_story_mapping.md#-プレゼントを送りたい人として自分で用意したプレゼントの情報品名などを入力して発送代行を依頼したい>)
*   **Event Storming:** (関連する場合)
    *   コマンド: `発送代行を依頼する` *(Ref: ../requirements/eventstorming.md)*
    *   イベント: `プレゼント発送代行が予約された` *(Ref: ../requirements/eventstorming.md)*

## 2. 目的・概要

ユーザーが事前に登録した届け先を選択し、自身で用意したプレゼントを、指定した記念日に合わせて発送代行するための予約を作成する。

**前提条件:**
*   ユーザーはログイン済みである。
*   届け先情報は事前に登録されている。

**注記:**
*   この画面では、ユーザーが用意するプレゼントの内容（品名など）をテキスト情報として入力する。
*   プレゼント本体をユーザーから運営側へどのように受け渡し、管理するかという**具体的な運用フローは別途定義が必要**となる。(MVPではフォーム外の運用でカバーすることを想定)

## 3. レイアウト・構成

画面は主に以下の要素で構成される。

1.  **共通ヘッダー:** アプリケーション全体のヘッダー (ロゴ、ナビゲーション、ログイン情報など)。
2.  **メインコンテンツエリア (フォーム形式):**
    *   **画面タイトル:** (例: 「プレゼント発送代行予約」)
    *   **届け先選択セクション:** 登録済みの届け先リストから一つを選択する。
    *   **予約情報入力セクション:**
        *   記念日 (日付入力)
        *   メッセージカード内容 (テキスト入力)
        *   発送代行プレゼント情報 (品名、特記事項などのテキスト入力)
    *   **予約操作ボタンエリア:**
        *   予約確定ボタン
        *   キャンセルボタン (または戻るボタン)
3.  **共通フッター:** アプリケーション全体のフッター。

(ワイヤーフレームや詳細な配置は Storybook で表現・確認することを推奨)

## 4. コンポーネント詳細と振る舞い

(画面を構成する主要なUIコンポーネントとその役割、ルール、状態などを記述。表形式推奨)

| コンポーネント名/役割    | 使用部品 (shadcn/ui 等) | ルール/状態/バリデーション                                                              | Storybook Link(s)                                |
| :------------------------- | :------------------------ | :-------------------------------------------------------------------------------------- | :----------------------------------------------- |
| 届け先選択                 | `Select`                  | 必須。登録済み届け先リストから選択。デフォルト未選択。                                       | [Default](link), [Selected](link)                |
| 記念日入力                 | `DatePicker`, `Input`     | 必須。本日より N 日後以降 (Nは発送リードタイム、MVPでは仮に10日とする) の未来日のみ選択可能。 それ以外の日付は選択不可またはエラー表示 (例:「記念日は10日以上先の日付を指定してください」)。 | [Default](link), [Error](link)                   |
| メッセージ入力             | `Textarea`                | 任意入力。最大200文字。文字数カウンター表示？ **プレースホルダー: 「感謝の気持ちをメッセージカードに添えましょう（最大200文字）」** | [Default](link), [Filled](link)                  |
| プレゼント情報 (品名/内容) | `Input`                   | 必須。運営がプレゼントを識別できる内容を入力。（例: 「手編みのマフラー」）                  |                                                  |
| プレゼント情報 (特記事項)  | `Textarea`                | 任意入力。サイズ、重さ、壊れ物等の特記事項を自由記述。（例: 「割れ物注意」「要冷蔵」）     |                                                  |
| 予約確定ボタン             | `Button`                  | 必須項目入力済み & エラーなしの場合に活性。非活性状態あり。 API送信中はローディング表示。 | [Active](link), [Inactive](link), [Loading](link) |
| キャンセルボタン           | `Button` (variant=outline?) | 常に活性。クリックで前の画面 (例: ダッシュボード) に戻る (入力内容は破棄)。                |                                                  |

## 5. その他特記事項

*   **発送リードタイム:** 現在、記念日選択に必要なリードタイムは仮に10日としているが、この日数の妥当性や地域差の考慮、およびプレゼントが期限までに運営に届かなかった場合のユーザーへの通知や予約の扱いなどの**運用ルールは別途検討・定義が必要**。
*   **アクセス制御:** この画面は、前提条件として届け先が1件以上登録されている場合にのみアクセス可能であることを想定する（呼び出し元画面での制御）。
*   **メッセージカード:** 
    *   仕様: メッセージ入力欄の内容が印字されるメッセージカードの仕様（**サイズははがきサイズ相当を想定**、デザイン、同梱方法など）は別途定義が必要。
    *   **例文 (入力補助):**
        *   (子供向けXmas例)「メリークリスマス！サンタさんからのプレゼントだよ。いつもおりこうさんにしてくれてありがとう。大好きだよ！」
        *   (パートナー向け記念日例)「〇〇へ いつもありがとう。〇回目の記念日おめでとう！これからもずっと一緒にいようね。」
*   **(エラーハンドリング方針など、追記が必要な事項)**

---
*最終更新日: 2025-05-04* 